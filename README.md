# mySQLInAction
学习笔记

01 | 基础架构：一条SQL查询语句是如何执行的？
##另外总结一下在评论中看到的问题的解答
1. 连接器是从权限表里边查询用户权限并保存在一个变量里边以供查询缓存，分析器，执行器在检查权限的时候使用。
2. sql执行过程中可能会有触发器这种在运行时才能确定的过程，分析器工作结束后的precheck是不能对这种运行时涉及到的表进行权限校验的，所以需要在执行器阶段进行权限检查。另外正是因为有precheck这个步骤，才会在报错时报的是用户无权，而不是 k字段不存在（为了不向用户暴露表结构）。
3. 词法分析阶段是从information schema里面获得表的结构信息的。
4. 可以使用连接池的方式，将短连接变为长连接。
5. mysql_reset_connection是mysql为各个编程语言提供的api，不是sql语句。
6. wait_timeout是非交互式连接的空闲超时，interactive_timeout是交互式连接的空闲超时。执行时间不计入空闲时间。这两个超时设置得是否一样要看情况。

1、mysql主要组成部分，连接器，优化器，执行器，存储引擎。
2、连接器，验证账号密码，维持链接，超时自动断开，链接过程复杂，建议使用长链接，连接比较占用内存，需要定时断开，5.7之后可以使用mysql_reset_connection。
3、分析器，验证语法的合规性，把sql转换成mysql内部识别的语句，表明转换成对应的id。
4、判断sql内部的执行顺序。
5、执行器，验证操作库表是否有权限，调存储引擎接口查询数据。
6、慢查询日志rows_examined，记录查询的时候扫描了多少行，相同表有肯能次数不同。